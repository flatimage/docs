<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Directories - FlatImage Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Directories";
        var mkdocs_page_input_path = "architecture/directories.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> FlatImage Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">FlatImage</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Comparison</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../comparison/">Comparison with other available tools</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Examples</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/steam/">Steam</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../examples/firefox/">Firefox</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Commands</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/root/">fim-root</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/exec/">fim-exec</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/environment/">fim-env</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/desktop/">fim-desktop</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/commit/">fim-commit</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/layer/">fim-layer</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/bind/">fim-bind</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../cmd/perms/">fim-perms</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Portal</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../portal/">Transparent Command Portal</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Configuration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../configuration/prompt/">Prompt</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../configuration/compression/">Compression</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../configuration/binding/">Binding</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Directories</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#structure-and-environment">Structure and Environment</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-app-directory">The app Directory</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#the-run-directory">The run Directory</a>
    </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">FlatImage Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Architecture</li>
      <li class="breadcrumb-item active">Directories</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="directories">Directories</h1>
<h2 id="structure-and-environment">Structure and Environment</h2>
<p>The snippet below represents the structure of the flatimage temporary files
directory located in <code>/tmp/fim</code>, the corresponding environment variable is
shown between <code>[]</code>.</p>
<pre><code>/tmp/fim [FIM_DIR_GLOBAL]
    ├── app
    │    └── app_id [FIM_DIR_APP]
    │        ├── bin [FIM_DIR_APP_BIN]
    │        └── instance
    │            └── instance_id [FIM_DIR_INSTANCE]
    │                └── mount [FIM_DIR_MOUNT]
    │                    ├── layers
    │                    │   ├── 0
    │                    │   ├── 1
    │                    │   ├── ...
    │                    │   └── n
    │                    └── overlayfs
    │
    └── run [FIM_DIR_RUNTIME]
        └── host [FIM_DIR_RUNTIME_HOST]
</code></pre>
<h2 id="the-app-directory">The <code>app</code> Directory</h2>
<ul>
<li><code>/tmp/fim/app</code> is a directory containing data of flatimage applications,
each application has its own <code>id</code> that represents a specific build, for example,
<code>119216d_20241019145954</code> is a build of commit <code>119216d</code> from <code>2024-10-19</code> (YYYY-MM-DD)
built at <code>14h 59m 54s</code>.</li>
<li><code>/tmp/fim/app/app_id</code> is used to store <code>binaries</code> and create <code>instances</code> of
flatimage applications.</li>
<li><code>/tmp/fim/app/app_id/bin</code> contains static binaries for the current flatimage
build.</li>
<li><code>/tmp/fim/app/app_id/instance</code> contains instances of the current flatimage
build, these instances share the binaries located in <code>/tmp/fim/app/app_id/bin</code>.</li>
<li><code>/tmp/fim/app/app_id/instance/instance_id</code> contains the
read-only layer mountpoints and overlayfs mountpoint over all the layers
from <code>0</code> to <code>n</code>. The <code>id</code> for the <code>instance_id</code> directory is generated from a
call to <code>mkdtemp</code> with the template <code>XXXXXX</code>.</li>
</ul>
<h2 id="the-run-directory">The <code>run</code> Directory</h2>
<p>The run directory contains <code>read-only</code> access to the host filesystem, it is only
accessible from inside the container and can be used to create symlinks for
libraries, sockets and more. This directory is used by the <code>gpu</code> permission to
symlink nvidia drivers.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../configuration/binding/" class="btn btn-neutral float-left" title="Binding"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../configuration/binding/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
